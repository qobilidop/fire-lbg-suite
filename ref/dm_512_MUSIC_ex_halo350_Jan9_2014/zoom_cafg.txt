%----  Relevant files
InitCondFile /scratch/01708/cfaucher/dm_512_MUSIC_ex_halo350_Jan9_2014/ics
OutputDir /scratch/01708/cfaucher/dm_512_MUSIC_ex_halo350_Jan9_2014

EnergyFile          energy.txt
InfoFile            info.txt
TimingsFile         timings.txt
CpuFile             cpu.txt
RestartFile         restart
SnapshotFileBase    snapshot
TimebinFile         timebin.txt
OutputListFilename  output_times.txt  % list of times for snaps

%---- File formats  
ICFormat           1  % 1=binary, 3=hdf5, 4=cluster
%ICFormat           3  % 1=binary, 3=hdf5, 4=cluster
SnapFormat         3  % 1=binary, 3=hdf5

%---- CPU-time limits
TimeLimitCPU              170000	% in seconds
CpuTimeBetRestartFile     3600  % in seconds
ResubmitOn        0
ResubmitCommand   my-scriptfile

%----- Memory allocation
MaxMemSize       3600	% sets maximum memory use in MByte
PartAllocFactor   2.0	% memory load allowed for better cpu balance
BufferSize        200	% in MByte


%---- Characteristics of run
TimeBegin           0.01960784       % Begin of the simulation
TimeMax             0.34       % End of the simulation

%---- Basic code options that set the type of simulation
ComovingIntegrationOn    1
PeriodicBoundariesOn     1
CoolingOn                1
StarformationOn          1

%---- Cosmological parameters
Omega0                0.276
OmegaLambda           0.724
OmegaBaryon           0.045
HubbleParam           0.703
BoxSize               60000.0

%---- Output frequency and output paramaters
OutputListOn              1 % =1 to use list in "OutputListFilename"
TimeBetSnapshot           1.1
TimeOfFirstSnapshot       0.01
TimeBetStatistics         0.05
NumFilesPerSnapshot        4 
NumFilesWrittenInParallel  16 

%---- Accuracy of time integration
TypeOfTimestepCriterion  0	% 0=standard
ErrTolIntAccuracy        0.012	% <0.02
CourantFac               0.15	% <0.2
MaxRMSDisplacementFac    0.25	% <0.25
MaxSizeTimestep          0.9
MinSizeTimestep          1.0e-6

%---- Tree algorithm, force accuracy, domain update frequency
TypeOfOpeningCriterion       1		% 1=standard
ErrTolTheta                  0.7	% 0.7=standard
ErrTolForceAcc               0.005 	% 0.0025=standard
TreeDomainUpdateFrequency    0.01	% depends on units: 0.0005-0.05

%---- Density estimation (kernel)
DesNumNgb              60	% 32 for standard kernel, 60-114 for quintic
MaxNumNgbDeviation     2

%---- Artificial viscosity 
ArtBulkViscConst    	1.0	% standard (constant) artificialviscosity 
%---- Time-dependent (more sophisticated M&M97+Balsara+Price04) viscosity
%ArtBulkViscConst        2.00 	% maximum allowed ArtBulkViscConst
%ViscositySourceScaling  2.77 	% functions as alphamax-multiplier for sourcevisc
%ViscosityDecayLength    3.73 	% multiplies length of falloff outside shock
%ViscosityAlphaMin       0.15 	% minimum ArtBulkViscConst outside shocks
%---- P&M artificial conductivity (if present); normalized to Alpha_Visc:
ArtCondConstant         1.00    % artificial conductivity (multiplier)
ViscosityAMin           0.20
ViscosityAMax           2.00

%---- System of units
UnitLength_in_cm         3.085678e21	%  1.0 kpc
UnitMass_in_g            1.989e43  	%  1.0e10 solar masses
UnitVelocity_in_cm_per_s 1e5       	%  1 km/sec
GravityConstantInternal  0		% calculated by code if =0

%---- Gravitational softening lengths
MaxHsml 200.0
MinGasHsmlFractional 0.1  % minimum gas smoothing in terms of softening
%----- Softening lengths per particle type. If ADAPTGRAVSOFT is set, these 
%-------- are the minimum softening allowed for each type -------
SofteningGas       0.05 # a little less than 1/100 of mean interparticle separation in hires
                       # resolve ~1 pkpc clumps at z=2 well
SofteningHalo      1.0 # assuming this is dark matter hires; changed from 0.1 to 1.0 for lean
SofteningDisk      5.0 # low res
SofteningBulge     5.0 # low res
SofteningStars     0.05 # same as gas
SofteningBndry     5.0 # low res
%---- if these are set (cosmo runs), softening is capped at these physical values 
% Code uses min(eps_com, eps_phys^max/a) as comoving softening.
SofteningGasMaxPhys       0.00625 # at z=7, corresponds to 50 cpc/h.
SofteningHaloMaxPhys      0.1 # changes from 0.0125 to 0.1 for lean
SofteningDiskMaxPhys      0.625
SofteningBulgeMaxPhys     0.625
SofteningStarsMaxPhys     0.00625
SofteningBndryMaxPhys     0.625
%----- parameters for adaptive gravitational softening
%AGS_DesNumNgb             32  % neighbor number for calculating adaptive gravsoft
%AGS_MaxNumNgbDeviation     8  % tolerance in Nngb (make larger than SPH)


%---- Initial temperature & temperature floor
InitGasTemp           1000	% set by IC file if =0
MinGasTemp             10.	% don't set <10 in explicit feedback runs


%---- Parameters for star formation model
CritPhysDensity      10.    %  critical physical density for star formation (cm^(-3))
MaxSfrTimescale      0.84    %  in internal time units; corresponds to ~1 per ff at nH=10 cm^-3; scale with 1/sqrt(CritPhysDensity) 
CritOverDensity      1000.    %  overdensity threshold value

%---- sub-grid (effective EOS) star formation & feedback model
%TempSupernova        3.0e8   	 % in Kelvin 
%TempClouds           1000.0  	 % in Kelvin 
%FactorSN             0.1	 % SNe coupling frac 
%FactorEVP            3000.0	 % controls Kennicutt normalization 
%FactorForSofterEQS   1.0	 % interpolate between 'stiff' and isothermal EOS
%WindEfficiency          2       % mass-loading scales~(WindEfficiency/WindEnergyFraction)
%WindFreeTravelLength    20      % wind travels until local tau <WindFreeTravelLength
%WindEnergyFraction      0.0625  % velocity-boosting of winds
%WindFreeTravelDensFac   0.1     % free-stream to density<WindFreeTravelDensFac*(launch density)


%-------------- PFH explicit star formation & feedback model
%--- initial metallicity of gas & stars in simulation
InitMetallicity        0.001 % (in solar)
InitStellarAge         0.001 % mean age (in Gyr)

%--- local radiation-pressure driven winds (LOCALMOMWINDS)
WindMomentumLoading          1.0 % momentum-loading (normalization relative to ssp)
WindInitialVelocityBoost     1.0 % velocity-boost factor
WindFreeTravelTauCriterion   0   % free-stream to < this tau (0=no stream)
WindFreeTravelRhoCriterion   0   % free-stream to < this fraction of rho_launch (0=nostream)

%--- SneII Heating Model (SNEII_HEATING)
SNeIIEnergyFrac              1.0 % fraction of mechanical energy to couple
SNeIIBW_Radius_Factor        1.0 % increase BW radius by this factor

%--- HII region photo-heating model (HII_HEATING) 
HIIRegion_Temp            10000. % temperature (in K) of heated gas
HIIRegion_fLum_Coupled       1.0 % fraction of UV luminosity to use

%--- long-range radiation pressure acceleration (RT_PHOTONMOMENTUM)
PhotonMomentum_Coupled_Fraction   1.0 % fraction of L to allow incident
PhotonMomentum_fUV   0.01 % incident SED f(L) in UV (minimum scattering)
PhotonMomentum_fOPT  0.01 % incident SED f(L) in optical/near-IR
PhotonMomentum_fIR   0.98 % incident SED f(L) in far-IR

%--- gas return/recycling (GASRETURN)
GasReturnFraction     1.0    % boost fraction of gas returns (relative to ssp)
AGBGasTemp            1.0    % boost temperature of gas returns (relative to ssp)


%-------------- Black Hole accretion & formation specifics
%--- formation/seed 
MinFoFMassForNewSeed       5.		% log(M_halo) for on-the-fly FoF seeding
SeedBlackHoleMass          1.0e-7 	% initial mass (on-the-fly or single galaxy)

%--- accretion 
BlackHoleAccretionFactor   1.0		% multiplier for mdot
BlackHoleEddingtonFactor   1.0		% fraction of eddington to cap (ENFORCE_EDDINGTON_LIMIT)
BlackHoleNgbFactor         3.0		% multiplier for kernel neighbors for BH
BlackHoleMaxAccretionRadius 0.02	% max radius for BH neighbor search/accretion
BlackHoleRadiativeEfficiency 0.1    % radiative efficiency

%--- feedback
BlackHoleFeedbackFactor    1.0		% generic feedback strength multipluer
BH_FluxMomentumFactor      0.0		% fraction of L for radiation pressure (BH_PHOTONMOMENTUM)
BAL_f_accretion            0.1429	% fraction of gas swallowed by BH (BH_BAL_WINDS)
BAL_v_outflow              5000.0	% velocity (km/s) of BAL wind outflow (BH_BAL_WINDS)
TimeBetOnTheFlyFoF        200000    % needed if BHs or Mhalo-based winds active
